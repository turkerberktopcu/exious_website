<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>EXIUS - Hakkımızda</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  
  <!-- Google Fonts & Ana Stil -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@500;700&display=swap" rel="stylesheet"/>
  <link rel="stylesheet" href="css/style.css"/>
  <link rel="stylesheet" href="components/header/header.css"/>
  <link rel="stylesheet" href="css/hakkimizda.css"/>
</head>
<body>
  <!-- Three.js Arka Plan -->
  <canvas id="bg-canvas"></canvas>

  <!-- Header (Mevcut Bileşen) -->
  <header-component></header-component>

  <!-- HERO BÖLÜMÜ -->
  <section id="about-hero" class="about-hero active section">
    <div id="about-hero-container" class="about-hero-container">
      <h1 id="hero-title"></h1>
      <p id="hero-subtitle"></p>
    </div>
  </section>

  <!-- HİKAYE BÖLÜMÜ -->
  <section id="story-section" class="story-section active section">
    <div id="story-container" class="story-container">
      <h2 id="story-heading"></h2>
      <p id="story-content"></p>
      <ul id="story-list"></ul>
    </div>
  </section>

  <!-- EKİP BÖLÜMÜ -->
  <section id="team-section" class="team-section active section">
    <div id="team-container" class="team-container">
      <h2 id="team-heading"></h2>
      <!--
        team-members will be populated dynamically.
        Each member is wrapped in <div class="team-row"> inside JS.
      -->
      <div id="team-members"></div>
    </div>
  </section>

  <!-- Footer (Mevcut Bileşen) -->
  <footer-component></footer-component>

  <!-- Loader -->
  <div id="loader" class="loader-overlay" style="display:none;">
    <div class="loader-spinner"></div>
  </div>
  
  <!-- Content Loader Script -->
  <script type="module">
    import { db } from '../../firebase-config.js';
    import { doc, getDoc } from "https://www.gstatic.com/firebasejs/11.4.0/firebase-firestore.js";
    
    // Show/hide loader
    function showLoader() {
      const loaderEl = document.getElementById('loader');
      if (loaderEl) loaderEl.style.display = 'flex';
    }
    function hideLoader() {
      const loaderEl = document.getElementById('loader');
      if (loaderEl) loaderEl.style.display = 'none';
    }
    
    // Load the hakkımızda content from Firestore
    async function loadHakkimizdaContent() {
      showLoader();
      try {
        const docRef = doc(db, 'pages', 'hakkimizda');
        const docSnap = await getDoc(docRef);
        if (docSnap.exists()) {
          const data = docSnap.data();
          
          // HERO
          document.getElementById('hero-title').innerHTML = data.hero.title;
          document.getElementById('hero-subtitle').innerHTML = data.hero.subtitle;
          
          // STORY
          document.getElementById('story-heading').innerText = data.story.heading;
          document.getElementById('story-content').innerText = data.story.content;
          const storyList = document.getElementById('story-list');
          storyList.innerHTML = '';
          if (data.story.bullets) {
            data.story.bullets.forEach(item => {
              const li = document.createElement('li');
              li.innerText = item;
              storyList.appendChild(li);
            });
          }
          
          // TEAM
          document.getElementById('team-heading').innerText = data.team.heading;
          const teamMembersDiv = document.getElementById('team-members');
          teamMembersDiv.innerHTML = '';
          
          // For each team member, create a div with .team-row
          data.team.members.forEach(member => {
            const memberEl = document.createElement('div');
            memberEl.classList.add('team-row');
            memberEl.innerHTML = `
              <h3>${member.role}</h3>
              <p>${member.name}</p>
            `;
            teamMembersDiv.appendChild(memberEl);
          });
        } else {
          console.error("Hakkımızda dokümanı bulunamadı.");
        }
      } catch (error) {
        console.error("Hakkımızda içeriği yüklenirken hata oluştu: ", error);
      } finally {
        hideLoader();
      }
    }
    
    // Load the page content
    loadHakkimizdaContent();
  </script>
  
  <!-- Kütüphaneler -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.min.js"></script>
  
  <!-- Bileşenler -->
  <script src="components/header/header.js"></script>
  <script type="module" src="components/footer/footer-component.js"></script>
  
  <!-- Sayfaya Özel JS (Three.js Arka Plan) -->
  <script type="module" src="js/hakkimizda.js"></script>
</body>
</html>
